# راهنمای راه‌اندازی سرور آوتلاین (Outline Server) روی سرور خصوصی مجازی (VPS)

هزینه:
سرور VPS: ماهی ۶ دلار + مالیات
دومین: سالی ۷.۵ دلار + مالیات

## مرحله ۱: خرید سرور خصوصی مجازی (VPS)

طبق ارزیابی من DigitalOcean سرراست‌ترین  خدمات رو ارائه می‌کنه.

> [!NOTE]
> **نکته:** خودتون اقدام به ساخت اکانت نکنید، از دوستان بخواهید که شما رو دعوت کنند که هر دو کردیت بگیرید.

بعد از وارد شدن با اکانت DigitalOcean از منوی بالا سمت راست Create -> Droplets رو انتخاب کنید.

<img width="396" height="275" alt="image" src="https://github.com/user-attachments/assets/61734711-31ad-4757-b2f3-c81913636c67" />

### انتخاب لوکیشن و سیستم‌عامل
**لوکیشن:** ترجیحاً یک کشور اروپایی (مثل آلمان یا هلند) را انتخاب کنید که پینگ کمتری به ایران داشته باشد.

**سیستم‌عامل:** گزینه‌ی پیش فرض یعنی **Ubuntu 24.04 LTS** یا نسخه‌های جدیدتر را انتخاب کنید.

**مشخصات فنی:** ارزان‌ترین پلن (۶ دلار در ماه) برای استفاده شخصی و خانوادگی کاملاً پاسخگو است.

<img width="1233" height="639" alt="image" src="https://github.com/user-attachments/assets/e7b59f5f-5bad-4597-b91b-8ae679201889" />

**در قسمت Choose Authentication Method گزینه سمت راست یعنی Password رو انتخاب کنید و یک پسورد برای سرورتون انتخاب کنید.

<img width="1214" height="423" alt="image" src="https://github.com/user-attachments/assets/1c1953ae-8418-4798-b223-42d1a3a8ceff" />


بعد از خرید با رفتن به قسمت Droplets از منوی سمت چپ می‌تونید سروری که خریدید رو ببینید.
با کلیک بر روی سرور آی‌پی (IP) سرور رو ببینید (اگه آی پی مشاهده نمی‌شه یک دقیقه صبر کنید تا ساخت سرور تمام شود).
این آی پی رو یادداشت کنید که در قسمت بعد باید واردش کنیم.

<img width="1232" height="342" alt="image" src="https://github.com/user-attachments/assets/4c0e739e-5843-4be7-aaf7-d9270e5f205a" />




## مرحله ۲: خرید دامنه (Domain)

من خودم دامنه رو از سایت CloudFlare خریدم. هم اینکه تنظیمات بعدی راحت‌تر بود، همین این که استفاده از CDN رو ساده‌تر می‌کنه.
به نظرم دامنه‌ی .org برای سال اول مناسب‌ترین قیمت رو داشت.
برای اسم دامنه هم سخت نگیرید، می‌تونید چند تا کاراکتر اتفاقی رو پشت هم قرار بدید. این کدها در لینوکس و مک او اس برای شما به طور دومین اتفاقی تولید می‌کنه.

Linux:

```bash
cat /dev/urandom | tr -dc 'a-z0-9' | fold -w 10 | head -n 1 | sed 's/$/.org/'
```

MacOS:

```bash
LC_ALL=C tr -dc 'a-z0-9' < /dev/urandom | head -c 10 | sed 's/$/.org/'
```
دامنه رو برای یک سال خریداری کنید (نگران آدرس خودتون نباشید، کلادفلر به طور اتوماتیک آدرس شما رو پنهان می‌کنه).

> [!WARNING]
> فقط Automatic Renewal رو خاموش کنید که سال بعد اتوماتیک از حسابتون پول کم نشه (به امید اینکه همین امسال تموم بشه).

بعد از خرید دومین، از منوی سمت چپ به قسمت Domains برید، دومینی که خریدید رو پیدا کنید و از از منوی سه نقطه Configure DNS رو انتخاب کنید.

<img width="1324" height="456" alt="image" src="https://github.com/user-attachments/assets/89167a90-7063-41a7-8646-ce09a59aae6d" />

دکمه‌ی Add Record رو بزنید و این تنظیمات رو در منوی باز شده قرار دهید:
Type: A
Name: @
IPv4: Your VPS IP
آی پی VPSی که در قسمت پیش یادداشت کردید رو اینجا وارد کنید.
Proxy Status: On (Orange Cloud)
حواستون باشه که پراکسی روشن (ابر نارنجی) باشه.

<img width="1237" height="268" alt="image" src="https://github.com/user-attachments/assets/132efa8a-0ce9-4ed6-a0e2-fcad631e0876" />

## مرحله ۳: تنظیمات سرور

دوباره به DogotalOcean برید و از قسمت Access دکمه بزرگ Launch Droplet Console رو بزنید که کنسول سرور شما روی مرورگر باز بشه.

<img width="1249" height="501" alt="image" src="https://github.com/user-attachments/assets/ed801c28-7851-45ed-9a4e-999e7a87bbc8" />

وقتی کنسول در مروگر بالا اومد وقت راه اندازی سرور شماست.
این فرمان کد setup.sh رو از همین جا دانلود می‌کنه و کل تنظیمات رو انجام می‌ده.

```bash
sudo bash -c "$(wget -qO- https://raw.githubusercontent.com/bardiadoosti/OutlineServer/master/setup.sh)"
```

اول دامنه‌ای که خریدید رو وارد کنید، و بعد هم یک آدرس ایمیل برای ثبت SSL Certificate.

آدرس `ssconf://yourdomain.org/config.txt` که در پایان نمایش داده می‌شه، آدرسیه که باید در Outline وارد کنید.

قبل از اینکه آدرس رو با خانواده‌تون در ایران به اشتراک بذارید، یک بار رو آوتلاین گوشی خودتون چک کنید که درست کار کنه.

اگه کمکی خواستید این آیدی توییتر منه: [@bardiadoosti](https://x.com/bardiadoosti)
